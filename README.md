# wtrim

`wtrim` 是一个用于 WAV 音频文件的自动静音裁剪及淡入淡出处理的小工具。  
基于 Rust 开发，支持多声道 WAV，支持指定裁剪阈值和淡入淡出长度。

---

## 功能

- 自动检测音频前后静音部分，按阈值裁剪  
- 支持多声道音频处理  
- 支持自定义裁剪阈值（以 dB 为单位）  
- 支持设置淡入淡出样本数，实现平滑过渡  
- 保持音频采样率、位深、通道数不变  
- 输出裁剪及淡入淡出后的 WAV 文件

---

## 下载

[下载地址](https://github.com/xmimu/wtrim/releases)

---

## 使用示例

```bash
# 基本用法：自动裁剪阈值 -64 dB，淡入淡出长度 0.05 秒（默认）
wtrim -i input.wav -o output.wav

# 指定裁剪阈值为 -32 dB，淡入淡出 0.1 秒（4410个采样点 @44.1kHz）
wtrim -i input.wav -o output.wav -t=-32 -f 4410

# 帮助信息
wtrim --help
```

---

## 参数说明

| 参数                   | 说明                       | 默认值      |
| -------------------- | ------------------------ | -------- |
| `-i, --input`        | 输入 WAV 文件路径              | 必须指定     |
| `-o, --output`       | 输出 WAV 文件路径              | 必须指定     |
| `-t, --threshold-db` | 裁剪阈值，单位 dB，裁剪音量低于该阈值的静音段 | `-64` dB |
| `-f, --fade-samples` | 淡入淡出长度，单位采样点（默认约0.05秒）   | `2205`   |

---

## 工作原理

1. 读取 WAV 文件，将采样数据转换为浮点数
2. 使用固定长度帧（1024采样点）计算每帧 RMS
3. 根据阈值确定有效音频的起止帧，裁剪静音部分
4. 对裁剪后的音频段做淡入淡出处理，避免突变音
5. 保存处理后的音频为新 WAV 文件

---

## 依赖库

* [hound](https://crates.io/crates/hound) - WAV 读写支持
* [clap](https://crates.io/crates/clap) - 命令行参数解析

---

## 许可证

MIT License

---
